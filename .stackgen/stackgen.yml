version: 1.0

representation:
  side_panel:
    label: "DynamoDB Table"
    icon: "aws-dynamodb-table"
  node:
    label:
      static: "DynamoDB Table"
      template: "DynamoDB Table - ${name}"
    display_type: "container"

variables:
  billing_mode:
    label: "Billing Mode"
    description: "The billing mode of the DynamoDB table."
    type: string
    default: "PROVISIONED"
    options: ["PROVISIONED", "PAY_PER_REQUEST"]
  stream_enabled:
    label: "Stream Enabled"
    description: "Enable DynamoDB Streams."
    type: bool
    options: [true, false]
  stream_view_type:
    label: "Stream View Type"
    description: "DynamoDB Streams settings for the table."
    type: string
    default: "NEW_IMAGE"
    options: ["NEW_IMAGE", "OLD_IMAGE", "NEW_AND_OLD_IMAGES", "KEYS_ONLY"]
  server_side_encryption:
    attributes:
      enabled:
        label: "Enabled"
        description: "Whether server-side encryption is enabled."
        type: bool
      kms_key_arn:
        label: "KMS Key ARN"
        description: "The ARN of the KMS key used for encryption."
        type: string
    default: []
  ttl:
    attributes:
      attribute_name:
        label: "Attribute Name"
        description: "The name of the attribute used for TTL."
        type: string
      enabled:
        label: "Enabled"
        description: "Whether TTL is enabled."
        type: bool
    default: []
  global_secondary_index:
    attributes:
      name:
        label: "Index Name"
        description: "The name of the global secondary index."
        type: string
      hash_key:
        label: "Hash Key"
        description: "The hash key for the index."
        type: string
      range_key:
        label: "Range Key"
        description: "The range key for the index."
        type: string
      projection_type:
        label: "Projection Type"
        description: "The set of attributes that are projected into the index."
        type: string
        options: ["ALL", "KEYS_ONLY", "INCLUDE"]
      read_capacity:
        label: "Read Capacity"
        description: "Read capacity units for the index."
        type: number
      write_capacity:
        label: "Write Capacity"
        description: "Write capacity units for the index."
        type: number
    default: []
  local_secondary_index:
    attributes:
      name:
        label: "Index Name"
        description: "The name of the local secondary index."
        type: string
      range_key:
        label: "Range Key"
        description: "The range key for the index."
        type: string
      projection_type:
        label: "Projection Type"
        description: "The set of attributes that are projected into the index."
        type: string
        options: ["ALL", "KEYS_ONLY", "INCLUDE"]
    default: []
    



variable_groups:
  - label: "DynamoDB Stream & Billing"
    description: "Configure DynamoDB stream and billing options."
    variables: ["billing_mode", "stream_enabled", "stream_view_type"]
  - label: "Indexes"
    description: "Configure secondary indexes."
    variables: ["global_secondary_index", "local_secondary_index"]
  - label: "Advanced Settings"
    description: "Advanced DynamoDB settings."
    variables: ["server_side_encryption", "ttl"]

discovery:
  type: "aws_dynamodb_table"
  dnd_supported: false
  data_source: "data_aws_dynamodb_table"





